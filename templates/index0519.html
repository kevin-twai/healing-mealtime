<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹ - åˆ†æ®µç‰ˆ</title>
</head>
<body>
    <h2>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹</h2>
    <label>æ€§åˆ¥ï¼š</label><input id="gender" value="ç”·æ€§"><br>
    <label>å¹´é½¡ï¼š</label><input id="age" value="30"><br>
    <label>èº«é«˜(cm)ï¼š</label><input id="height" value="175"><br>
    <label>é«”é‡(kg)ï¼š</label><input id="weight" value="70"><br>
    <label>ç›®æ¨™ï¼š</label><input id="goal" value="æ¸›è„‚"><br>
    <button onclick="submit()">é€å‡º</button>
    <div id="loading">ğŸ”„ è«®è©¢ä¸­...</div>
    <div id="result"></div>

    <script>
    async function submit() {
        const user_input = `æ€§åˆ¥ï¼š${gender.value}ï¼Œå¹´é½¡ï¼š${age.value}ï¼Œèº«é«˜ï¼š${height.value}cmï¼Œé«”é‡ï¼š${weight.value}kgï¼Œç›®æ¨™ï¼š${goal.value}`;
        const sections = ["ğŸ“Œ åŸºæœ¬è³‡æ–™æ‘˜è¦", "ğŸ½ æ¯æ—¥ä¸‰é¤å»ºè­°", "ğŸŒ è¨“ç·´å‰å¾Œé£²é£Ÿå»ºè­°", "ğŸƒâ€â™‚ï¸ ä¸€é€±é‹å‹•å»ºè­°"];
        result.innerHTML = "";
        loading.style.display = "block";

        for (let i = 0; i < sections.length; i++) {
            const res = await fetch("/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ user_input, section: sections[i] })
            });
            const data = await res.json();
            if (data.content) {
                result.innerHTML += `<h3>${data.section}</h3><pre>${data.content}</pre>`;
            } else {
                result.innerHTML += `<h3>${data.section}</h3><p style="color:red;">ç™¼ç”ŸéŒ¯èª¤ï¼š${data.error}</p>`;
            }
        }

        loading.style.display = "none";
    }

    const gender = document.getElementById("gender");
    const age = document.getElementById("age");
    const height = document.getElementById("height");
    const weight = document.getElementById("weight");
    const goal = document.getElementById("goal");
    const result = document.getElementById("result");
    const loading = document.getElementById("loading");
    loading.style.display = "none";
    </script>
</body>
</html>