
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹</title>
  <style>
    label {
      display: inline-block;
      width: 80px;
    }
    select, input {
      margin-bottom: 8px;
    }
    #result {
      margin-top: 20px;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <h2>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹</h2>

  <div>
    <label>æ€§åˆ¥ï¼š</label>
    <select id="gender">
      <option value="ç”·æ€§">ç”·æ€§</option>
      <option value="å¥³æ€§">å¥³æ€§</option>
    </select><br>

    <label>å¹´é½¡ï¼š</label>
    <input type="number" id="age" value="51"><br>

    <label>èº«é«˜(cm)ï¼š</label>
    <input type="number" id="height" value="178"><br>

    <label>é«”é‡(kg)ï¼š</label>
    <input type="number" id="weight" value="78"><br>

    <label>ç›®æ¨™ï¼š</label>
    <select id="goal">
      <option value="æ¸›è„‚">æ¸›è„‚</option>
      <option value="æ¸›é‡">æ¸›é‡</option>
      <option value="æ¸›è„‚å¢è‚Œ">æ¸›è„‚å¢è‚Œ</option>
    </select><br>

    <button onclick="submitData()">é€å‡º</button>
  </div>

  <div id="result"></div>

  <script>
    function submitData() {
      const gender = document.getElementById('gender').value;
      const age = parseInt(document.getElementById('age').value);
      const height = parseInt(document.getElementById('height').value);
      const weight = parseInt(document.getElementById('weight').value);
      const goal = document.getElementById('goal').value;

      const resultDiv = document.getElementById('result');
      resultDiv.innerText = 'è«®è©¢ä¸­...';

      fetch('/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          gender: gender,
          age: age,
          height: height,
          weight: weight,
          goal: goal
        })
      })
      .then(response => {
        if (!response.ok) throw new Error('Network response was not ok');
        return response.json();
      })
      .then(data => {
        resultDiv.innerHTML =
          `ğŸ“Œ <b>åŸºæœ¬è³‡æ–™</b><br>${data.summary}<br><br>` +
          `ğŸ½ <b>é£²é£Ÿå»ºè­°</b><br>${data.meal}<br><br>` +
          `ğŸŒ <b>è¨“ç·´å‰å¾Œå»ºè­°</b><br>${data.pre_post_meal}<br><br>` +
          `ğŸƒâ€â™‚ï¸ <b>é‹å‹•å»ºè­°</b><br>${data.training}`;
      })
      .catch(error => {
        resultDiv.innerText = 'ç™¼ç”ŸéŒ¯èª¤ï¼š' + error;
      });
    }
  </script>
</body>
</html>
