<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>療癒食光諮詢助手</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>療癒食光諮詢助手</h1>
    <form id="advisorForm">
        <input type="text" name="user_input" placeholder="請輸入性別、年齡、身高、體重、目標（以逗號分隔）">
        <button type="submit">送出</button>
    </form>
    <div id="loading" style="display:none;">🔄 諮詢中...</div>
    <div id="result" class="response-block"></div>

    <script>
    const form = document.getElementById("advisorForm");
    const loading = document.getElementById("loading");
    const result = document.getElementById("result");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        loading.style.display = "block";
        result.innerHTML = "";
        const formData = new FormData(form);
        const res = await fetch("/", {
            method: "POST",
            body: formData
        });
        const data = await res.json();
        loading.style.display = "none";
        result.innerHTML = "<pre>" + (data.response || data.error) + "</pre>";
    });
    </script>
</body>
</html>
