<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹</title>
</head>
<body>
    <h2>ç™‚ç™’é£Ÿå…‰è«®è©¢åŠ©æ‰‹</h2>
    <label for="gender">æ€§åˆ¥ï¼š</label>
    <select id="gender">
        <option value="ç”·æ€§">ç”·æ€§</option>
        <option value="å¥³æ€§">å¥³æ€§</option>
    </select><br>

    <label for="age">å¹´é½¡ï¼š</label>
    <input type="number" id="age" min="10" max="120"><br>

    <label for="height">èº«é«˜(cm)ï¼š</label>
    <input type="number" id="height" min="100" max="250"><br>

    <label for="weight">é«”é‡(kg)ï¼š</label>
    <input type="number" id="weight" min="30" max="200"><br>

    <label for="goal">ç›®æ¨™ï¼š</label>
    <select id="goal">
        <option value="æ¸›è„‚">æ¸›è„‚</option>
        <option value="æ¸›é‡">æ¸›é‡</option>
        <option value="æ¸›è„‚å¢è‚Œ">æ¸›è„‚å¢è‚Œ</option>
    </select><br>

    <button onclick="submit()">é€å‡º</button>
    <div id="loading" style="display:none;">ğŸ”„ è«®è©¢ä¸­...</div>
    <div id="result"></div>

    <script>
    async function submit() {
        document.getElementById("loading").style.display = "block";
        document.getElementById("result").innerHTML = "";

        const data = {
            gender: document.getElementById("gender").value,
            age: document.getElementById("age").value,
            height: document.getElementById("height").value,
            weight: document.getElementById("weight").value,
            goal: document.getElementById("goal").value
        };

        const response = await fetch("/chat", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        document.getElementById("loading").style.display = "none";
        if (result.reply) {
            document.getElementById("result").innerHTML = result.reply.map(r =>
                `<h3>${r.title}</h3><pre>${r.content}</pre>`
            ).join("");
        } else {
            document.getElementById("result").innerText = result.error || "ç™¼ç”ŸéŒ¯èª¤";
        }
    }
    </script>
</body>
</html>